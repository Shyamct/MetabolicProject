function demo_create(){var t=$("#jstree_demo").jstree(!0),n=t.get_selected();if(console.log(n),!n.length)return!1;n=n[0];n=t.create_node(n,{type:"file"});console.log(n);n&&t.edit(n)}function demo_rename(){var t=$("#jstree_demo").jstree(!0),n=t.get_selected();if(!n.length)return!1;n=n[0];t.edit(n)}function demo_delete(){var n=$("#jstree_demo").jstree(!0),t=n.get_selected();if(!t.length)return!1;n.delete_node(t)}var data=[],baseUrl="WebService/HeadMaster.asmx/",getHeadList=function(){$.ajax({method:"Post",url:baseUrl+"getHeadList",dataType:"json",contentType:"application/json",statusCode:{401:function(){window.location.href="index.html"}},success:function(n){var i=JSON.parse(n.d),t;i.responseCode==1&&($.each(i.responseValue.Table,function(){data.push({id:this.id,parent:this.parentId=="0"?"#":this.parentId,text:this.headName})}),t=!1,$("#demo_q").keyup(function(){t&&clearTimeout(t);t=setTimeout(function(){var n=$("#demo_q").val();$("#jstree_demo").jstree(!0).search(n)},250)}),$("#jstree_demo").jstree({core:{animation:0,check_callback:!0,force_text:!0,themes:{stripes:!0},data:data},types:{"#":{max_children:1,max_depth:4,valid_children:["root"]},root:{icon:"/static/3.3.7/assets/images/tree_icon.png",valid_children:["default"]},"default":{valid_children:["default","file"]},file:{icon:"glyphicon glyphicon-file",valid_children:[]}},plugins:["contextmenu","dnd","search","state","types","wholerow"],contextmenu:{items:function(n){var t=$("#jstree_demo").jstree(!0);return{Create:{label:"Create",action:function(){n=t.create_node(n);t.edit(n)}},Rename:{label:"Rename",action:function(){t.edit(n)}}}}}}).bind("rename_node.jstree",function(n,t){var i={parentId:t.node.parent,headName:t.text,id:t.node.id};$.ajax({method:"Post",url:baseUrl+"insertNewNode",dataType:"json",contentType:"application/json",data:"{'dataValue':'"+JSON.stringify(i)+"'}",statusCode:{401:function(){window.location.href="index.html"}},success:function(n){var t=JSON.parse(n.d);t.responseCode==1&&(maketoast("success","Success","Save Successfully."),getHeadList())},error:function(){},failure:function(){}})}))},error:function(){},failure:function(){}})},saveNewNode=function(n,t,i){var r={parentId:n,headName:t,id:i};$.ajax({method:"Post",url:baseUrl+"getHeadList",dataType:"json",contentType:"application/json",statusCode:{401:function(){window.location.href="index.html"}},success:function(n){var t=JSON.parse(n.d);t.responseCode==1&&getHeadList()},error:function(){},failure:function(){}})};$(function(){getHeadList()});